<?xml version="1.0" encoding="UTF-8"?>
<mdmserverobject:WSTransformerV2E xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:mdmserverobject="http://www.talend.org/mdmserverobject" xmi:id="_5a-PkHtZEeKWWJY3kGndnA" name="OnUpdate" description="OnUpdate process">
  <lastServerDef xmi:id="_gUH_wHuBEeKWWJY3kGndnA" name="Localhost" label="" passwd="dGFsZW5k" url="http://localhost:8180/talend/TalendPort" user="admin"/>
  <processSteps xmi:id="_etYrcHuBEeKWWJY3kGndnA" pluginJNDI="amalto/local/transformer/plugin/xslt" description="Extract Update Report" parameters="&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;  xmlns:mdm=&quot;java:com.amalto.core.plugin.base.xslt.MdmExtension&quot; version=&quot;1.0&quot;> &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot; omit-xml-declaration=&quot;yes&quot; />&#xA;    &lt;xsl:template match=&quot;/&quot; priority=&quot;1&quot;>&#xA;    &lt;exchange>&#xA;        &lt;report>&#xA;            &lt;xsl:copy-of select=&quot;Update&quot;/>&#xA;        &lt;/report>&#xA;        &lt;item>&#xA;            &lt;xsl:copy-of select='mdm:getItemProjection(Update/RevisionID,Update/DataCluster,Update/Concept,Update/Key)'/>&#xA;        &lt;/item>&#xA;    &lt;/exchange>&#xA;    &lt;/xsl:template>&#xA;&lt;/xsl:stylesheet>">
    <inputMappings xmi:id="_etYrcXuBEeKWWJY3kGndnA" pipelineVariable="_DEFAULT_" pluginVariable="xml"/>
    <outputMappings xmi:id="_etYrcnuBEeKWWJY3kGndnA" pipelineVariable="item_xml" pluginVariable="text"/>
  </processSteps>
  <processSteps xmi:id="_etYrc3uBEeKWWJY3kGndnA" pluginJNDI="amalto/local/transformer/plugin/codec" description="Unescape the item XML" parameters="&lt;parameters>&#xA;&lt;method>DECODE&lt;/method>&#xA;&lt;algorithm>XMLESCAPE&lt;/algorithm>&#xA;&lt;/parameters>&#xA;">
    <inputMappings xmi:id="_etYrdHuBEeKWWJY3kGndnA" pipelineVariable="item_xml" pluginVariable="law_text"/>
    <outputMappings xmi:id="_etYrdXuBEeKWWJY3kGndnA" pipelineVariable="decode_xml" pluginVariable="codec_text"/>
  </processSteps>
  <processSteps xmi:id="_etYrdnuBEeKWWJY3kGndnA" pluginJNDI="amalto/local/transformer/plugin/xslt" description="Create update message" parameters="&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:mdm=&quot;java:com.amalto.core.plugin.base.xslt.MdmExtension&quot; version=&quot;1.0&quot;>  &#xA;    &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot; omit-xml-declaration=&quot;yes&quot;/>  &#xA;    &lt;xsl:template match=&quot;/&quot; priority=&quot;1&quot;> &#xA;        &lt;Update> &#xA;            &lt;Operation>&#xA;                &lt;Timestamp> &#xA;                    &lt;xsl:value-of select=&quot;exchange/report/Update/TimeInMillis&quot;/> &#xA;                &lt;/Timestamp>  &#xA;                &lt;OperationType> &#xA;                    &lt;xsl:value-of select=&quot;exchange/report/Update/OperationType&quot;/> &#xA;                &lt;/OperationType>  &#xA;                &lt;DataCluster> &#xA;                    &lt;xsl:value-of select=&quot;exchange/report/Update/DataCluster&quot;/> &#xA;                &lt;/DataCluster>  &#xA;                &lt;DataModel> &#xA;                    &lt;xsl:value-of select=&quot;exchange/report/Update/DataModel&quot;/> &#xA;                &lt;/DataModel>  &#xA;                &lt;Concept> &#xA;                    &lt;xsl:value-of select=&quot;exchange/report/Update/Concept&quot;/> &#xA;                &lt;/Concept>  &#xA;                &lt;Key> &#xA;                    &lt;xsl:value-of select=&quot;exchange/report/Update/Key&quot;/> &#xA;                &lt;/Key>  &#xA;                &lt;xsl:for-each select=&quot;exchange/report/Update/Item&quot;> &#xA;                    &lt;Item> &#xA;                        &lt;Path> &#xA;                            &lt;xsl:value-of select=&quot;path&quot;/> &#xA;                        &lt;/Path>  &#xA;                        &lt;OldValue> &#xA;                            &lt;xsl:value-of select=&quot;oldValue&quot;/> &#xA;                        &lt;/OldValue>  &#xA;                        &lt;NewValue> &#xA;                            &lt;xsl:value-of select=&quot;newValue&quot;/> &#xA;                        &lt;/NewValue> &#xA;                    &lt;/Item> &#xA;                &lt;/xsl:for-each> &#xA;            &lt;/Operation>  &#xA;            &lt;xsl:copy-of select=&quot;exchange/item/*&quot;/> &#xA;        &lt;/Update> &#xA;    &lt;/xsl:template>  &#xA;&lt;/xsl:stylesheet>">
    <inputMappings xmi:id="_etYrd3uBEeKWWJY3kGndnA" pipelineVariable="decode_xml" pluginVariable="xml"/>
    <outputMappings xmi:id="_etYreHuBEeKWWJY3kGndnA" pipelineVariable="output" pluginVariable="text"/>
  </processSteps>
  <processSteps xmi:id="_etZSgHuBEeKWWJY3kGndnA" pluginJNDI="amalto/local/transformer/plugin/dumpandgo" description="Display update message" parameters="">
    <inputMappings xmi:id="_etZSgXuBEeKWWJY3kGndnA" pipelineVariable="output" pluginVariable="in_text"/>
    <outputMappings xmi:id="_etZSgnuBEeKWWJY3kGndnA" pipelineVariable="output" pluginVariable="out_text"/>
  </processSteps>
</mdmserverobject:WSTransformerV2E>
